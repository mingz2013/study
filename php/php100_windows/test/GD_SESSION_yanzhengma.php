<p style="color:red;background:blue;"><b>php5中图片验证码的制作</b></p><hr size=5 color=yellow><p>	<b>GD库</b> 提供了一系列用来处理图片的API，使用GD库可以处理图片，或者生成图片<br>	在网站上GD库通常用来生成缩略图或者用来对图片加水印或者对网站数据生成报表。<br>	通过php.ini 启用GD库<br>	php.ini 里面    ;extension=php_gd2.dll     前面的 ； 去掉<br></p><p>	<b>部分GD库函数的介绍</b><br>	1.  imagecreatetruecolor(int x_size, int y_size)；	// 	x就是宽 y就是高		新建一个真彩色图像<br>	2.	imagecolorallocate(resource image, int red, int green, int blue)；	// 为一幅图像分配颜色（调色板） <br>	3. 	imagestring(resource image, font, int x, int y, 内容， 颜色);	图像，字体，x y 坐标，内容，内容的颜色 	// 绘图函数<br></p><p>	<b>随机函数，十六进制函数</b><br>	1 rand([int min, int max])  	// rand(1,4) 随机 1-4之间的数<br>	2 dechex(十进制数)	// 十六进制1~f	<br></p><p>	验证码制作过程：<br>			生成随机数 -> 创建图片 ->  随机数写进图片 -> 保存在SESSION中	<br>			</p><p>	<b>image 与 header 输出的介绍</b><br>		header 是定义头的动作，新PHP5中支持三种类型header(*)<br>	Countent-Type:xxxx/yyyy // 内容文件的类型 如：image/gif  image/jpeg image/png			<br>	Location:xxxx:yyyy/zzzz	<br>	Status:nnn xxxxxx		<br>	<br>	GD库中有对应的image类型<br>	imagejpeg(*) imagegif(*) imagepng(*).....编码转换<br>	<br></p><p>	imageline(resource image, int x1, int y1, int x2, int y2, int color);		// 画线函数	<br>	imagesetpixel(resource image, int x, int y, int color);//画点函数<br>	imagettftext(resource image, float size, float angle, int x, int y, int color, string fontfile, string text); // 带字体的写入函数 <br></p><?	session_start();	$rand=NULL;	for($i=0;$i<4;$i++)	{		$rand.=dechex(rand(1,15));	// 随机数	}	$_SESSION['check_pic'] = $rand;		$im = imagecreatetruecolor(100, 30);	// 	创建图片		$bg = imagecolorallocate($im, 0, 0, 0);	// 设置颜色	// 	第一次用调色板的时候 就是背景颜色	$te = imagecolorallocate($im, 255, 255, 255);		for($i=0;$i<3;$i++)	{		$te2 = imagecolorallocate($im, rand(0,255), rand(0,255), rand(0,255));		imageline($im,rand(0,100),rand(0,15),100,rand(0,15),$te2);	}		for($i=0;$i<200;$i++)	{		$te2 = imagecolorallocate($im, rand(0,255), rand(0,255), rand(0,255));		imagesetpixel($im, rand()/100, rand()/30,$te2);	}	$str = iconv("gb2312","UTF-8","新年快乐");//确定要绘制的中文	imagettftext($im,12,0,20,20,$te, 'aimhei.ttf',$str);		imagestring($im, rand(1,6),rand(3,70),rand( 0,15),  $rand, $te);	// 写数字		header("Content-type:image/jpeg"); // 输出图像头	imagejpeg($im); // 输出图像	?>